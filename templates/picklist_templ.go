// Code generated by templ - DO NOT EDIT.

// templ: version: v0.3.977
package templates

//lint:file-ignore SA4006 This context is only used if a nested component is present.

import "github.com/a-h/templ"
import templruntime "github.com/a-h/templ/runtime"

func PicklistPage(data PicklistPageData) templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil {
			return templ_7745c5c3_CtxErr
		}
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var1 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var1 == nil {
			templ_7745c5c3_Var1 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		templ_7745c5c3_Var2 := templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
			templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
			templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
			if !templ_7745c5c3_IsBuffer {
				defer func() {
					templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
					if templ_7745c5c3_Err == nil {
						templ_7745c5c3_Err = templ_7745c5c3_BufErr
					}
				}()
			}
			ctx = templ.InitializeContext(ctx)
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 1, "<main class=\"container mx-auto px-4 py-8\"><div class=\"max-w-6xl mx-auto bg-[#F2E8D5] border-2 border-[#D2B48C] rounded-3xl p-6 shadow-xl\"><h1 class=\"text-3xl font-black text-[#5D4037] mb-6 text-center tracking-tight uppercase\">Picklist Generator</h1><div class=\"mb-6\"><label class=\"block text-xs font-bold uppercase text-[#A1887F] ml-2 mb-1\">Event</label> <select id=\"event-select\" class=\"w-full p-3 bg-[#FFFBF5] border-2 border-[#D2B48C] rounded-xl text-stone-700\">")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			for key, name := range data.Events {
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 2, "<option value=\"")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var3 string
				templ_7745c5c3_Var3, templ_7745c5c3_Err = templ.JoinStringErrs(key)
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `templates/picklist.templ`, Line: 13, Col: 26}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var3))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 3, "\">")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var4 string
				templ_7745c5c3_Var4, templ_7745c5c3_Err = templ.JoinStringErrs(name)
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `templates/picklist.templ`, Line: 13, Col: 35}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var4))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 4, "</option>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 5, "</select></div><div class=\"mb-6 relative\"><label class=\"block text-xs font-bold uppercase text-[#A1887F] ml-2 mb-1\">Equation</label> <input id=\"equation-input\" type=\"text\" placeholder=\"#epa + (#defense_epa * 2) + (#match_efficiency / 10)\" class=\"w-full p-3 bg-[#FFFBF5] border-2 border-[#D2B48C] rounded-xl text-stone-700 font-mono\"><p class=\"text-xs text-[#A1887F] mt-1 ml-2\">Type # followed by a variable. Available: epa, defense_epa, foul_epa, defense_pct, defended_against_pct, match_efficiency, match_efficiency_var, intake_efficiency, intake_efficiency_var, auto_climb_rate, teleop_climb_rate, matches, wins, losses</p></div><button onclick=\"runPicklist()\" class=\"w-full bg-[#D2B48C] hover:bg-[#B99976] text-[#4E342E] font-extrabold py-3 rounded-xl shadow-lg transition active:scale-95 uppercase tracking-widest border-b-4 border-[#B99976]\">Generate Picklist</button><div id=\"picklist-results\" class=\"mt-6\"></div></div><div class=\"text-center mt-4\"><a href=\"/\" class=\"text-[#5D4037] hover:text-[#8D6E63] font-bold\">← Back to Home</a></div></main><script>\n\t\t\tconst variables = [\"epa\", \"defense_epa\", \"foul_epa\", \"defense_pct\", \"defended_against_pct\", \"match_efficiency\", \"match_efficiency_var\", \"intake_efficiency\", \"intake_efficiency_var\", \"auto_climb_rate\", \"teleop_climb_rate\", \"matches\", \"wins\", \"losses\"];\n\t\t\t\n\t\t\tconst input = document.getElementById('equation-input');\n\t\t\t\n\t\t\tinput.addEventListener('input', function(e) {\n\t\t\t\tconst value = this.value;\n\t\t\t\tconst cursorPos = this.selectionStart;\n\t\t\t\tconst textBefore = value.substring(0, cursorPos);\n\t\t\t\tconst textAfter = value.substring(cursorPos);\n\t\t\t\tconst match = textBefore.match(/#([a-zA-Z0-9_]*)$/);\n\t\t\t\t\n\t\t\t\tif (!match) return;\n\t\t\t\t\n\t\t\t\tconst partial = match[1];\n\t\t\t\tconst matches = variables.filter(v => v.toLowerCase().startsWith(partial.toLowerCase()));\n\t\t\t\t\n\t\t\t\t// Remove old suggestions\n\t\t\t\tconst oldList = document.getElementById('suggestions');\n\t\t\t\tif (oldList) oldList.remove();\n\t\t\t\t\n\t\t\t\tif (matches.length === 0 || partial === '') return;\n\t\t\t\t\n\t\t\t\tconst list = document.createElement('div');\n\t\t\t\tlist.id = 'suggestions';\n\t\t\t\tlist.className = 'absolute z-10 w-full bg-[#FFFBF5] border-2 border-[#D2B48C] border-t-0 rounded-b-xl max-h-32 overflow-y-auto';\n\t\t\t\tlist.style.top = (input.offsetTop + input.offsetHeight) + 'px';\n\t\t\t\tlist.style.left = input.offsetLeft + 'px';\n\t\t\t\t\n\t\t\t\tmatches.forEach(v => {\n\t\t\t\t\tconst div = document.createElement('div');\n\t\t\t\t\tdiv.className = 'p-2 cursor-pointer hover:bg-[#D2B48C] text-sm font-mono text-[#5D4037]';\n\t\t\t\t\tdiv.textContent = '#' + v;\n\t\t\t\t\tdiv.addEventListener('click', function() {\n\t\t\t\t\t\tconst newValue = textBefore.replace(/#[a-zA-Z0-9_]*$/, '#' + v) + textAfter;\n\t\t\t\t\t\tinput.value = newValue;\n\t\t\t\t\t\tinput.focus();\n\t\t\t\t\t\tlist.remove();\n\t\t\t\t\t});\n\t\t\t\t\tlist.appendChild(div);\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tinput.parentElement.appendChild(list);\n\t\t\t});\n\t\t\t\n\t\t\tinput.addEventListener('blur', function() {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tconst list = document.getElementById('suggestions');\n\t\t\t\t\tif (list) list.remove();\n\t\t\t\t}, 200);\n\t\t\t});\n\t\t\t\n\t\t\tasync function runPicklist() {\n\t\t\t\tconst eventKey = document.getElementById('event-select').value;\n\t\t\t\tconst equation = document.getElementById('equation-input').value;\n\t\t\t\t\n\t\t\t\tif (!eventKey || eventKey === 'none') {\n\t\t\t\t\talert('Please select an event');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (!equation.trim()) {\n\t\t\t\t\talert('Please enter an equation');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst resp = await fetch('/api/picklist', {\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\theaders: { 'Content-Type': 'application/json' },\n\t\t\t\t\tbody: JSON.stringify({ event_key: eventKey, equation: equation })\n\t\t\t\t});\n\n\t\t\t\tif (!resp.ok) {\n\t\t\t\t\talert('Failed to generate picklist');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst teams = await resp.json();\n\t\t\t\tif (!teams || teams.length === 0) {\n\t\t\t\t\tdocument.getElementById('picklist-results').innerHTML = '<p class=\"text-center text-[#A1887F] py-8\">No teams found with valid data</p>';\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Get all variable keys from equation (not from data)\n\t\t\t\tconst varMatches = equation.match(/#([a-zA-Z_][a-zA-Z0-9_]*)/g) || [];\n\t\t\t\tconst varList = varMatches.map(v => v.substring(1));\n\n\t\t\t\t// Build table\n\t\t\t\tlet html = '<div class=\"overflow-x-auto\"><table class=\"w-full text-sm\"><thead><tr class=\"bg-[#D2B48C] text-[#4E342E]\">';\n\t\t\t\thtml += '<th class=\"p-2 text-center font-bold\">✗</th>';\n\t\t\t\thtml += '<th class=\"p-2 text-left font-bold\">Rank</th>';\n\t\t\t\thtml += '<th class=\"p-2 text-left font-bold\">Team</th>';\n\t\t\t\thtml += '<th class=\"p-2 text-right font-bold\">Score</th>';\n\t\t\t\tvarList.forEach(v => {\n\t\t\t\t\thtml += `<th class=\"p-2 text-right font-bold\">${v.replace(/_/g, ' ')}</th>`;\n\t\t\t\t});\n\t\t\t\thtml += '</tr></thead><tbody>';\n\n\t\t\t\tteams.forEach((t, i) => {\n\t\t\t\t\tconst teamNum = t.Team || 'Unknown';\n\t\t\t\t\tconst scoreVal = t.Score != null ? t.Score.toFixed(2) : '0.00';\n\t\t\t\t\tconst teamVars = t.Vars || {};\n\t\t\t\t\thtml += `<tr class=\"border-b border-[#D2B48C]/30 bg-[#FFFBF5]\">`;\n\t\t\t\t\thtml += `<td class=\"p-2 text-center\"><input type=\"checkbox\" onchange=\"toggleCross(this)\"></td>`;\n\t\t\t\t\thtml += `<td class=\"p-2 font-bold text-[#5D4037]\">${i + 1}</td>`;\n\t\t\t\t\thtml += `<td class=\"p-2 font-bold text-[#5D4037]\">${teamNum}</td>`;\n\t\t\t\t\thtml += `<td class=\"p-2 text-right font-bold text-[#5D4037]\">${scoreVal}</td>`;\n\t\t\t\t\tvarList.forEach(v => {\n\t\t\t\t\t\tconst val = teamVars[v] != null ? teamVars[v].toFixed(2) : '0.00';\n\t\t\t\t\t\thtml += `<td class=\"p-2 text-right text-[#A1887F]\">${val}</td>`;\n\t\t\t\t\t});\n\t\t\t\t\thtml += '</tr>';\n\t\t\t\t});\n\n\t\t\t\thtml += '</tbody></table></div>';\n\t\t\t\tdocument.getElementById('picklist-results').innerHTML = html;\n\t\t\t}\n\n\t\t\tfunction toggleCross(cb) {\n\t\t\t\tconst row = cb.closest('tr');\n\t\t\t\tif (cb.checked) {\n\t\t\t\t\trow.classList.add('opacity-50', 'line-through');\n\t\t\t\t} else {\n\t\t\t\t\trow.classList.remove('opacity-50', 'line-through');\n\t\t\t\t}\n\t\t\t}\n\t\t</script>")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			return nil
		})
		templ_7745c5c3_Err = Layout("Vibe Scout | Picklist").Render(templ.WithChildren(ctx, templ_7745c5c3_Var2), templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		return nil
	})
}

var _ = templruntime.GeneratedTemplate
